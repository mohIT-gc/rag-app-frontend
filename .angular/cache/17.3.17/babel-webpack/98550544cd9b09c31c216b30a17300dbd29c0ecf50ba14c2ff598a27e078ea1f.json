{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/mohee/source/repos/rag-ui/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction AppComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \" \\u26A0\\uFE0F Fill all configuration fields to enable upload and query. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_span_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Indexing...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_span_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Thinking...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_section_55_li_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const s_r1 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\"\", s_r1.source, \" (chunk \", s_r1.chunk, \")\");\n  }\n}\nfunction AppComponent_section_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\")(1, \"h3\");\n    i0.ɵɵtext(2, \"Answer\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 14);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h4\");\n    i0.ɵɵtext(6, \"Sources\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"ul\");\n    i0.ɵɵtemplate(8, AppComponent_section_55_li_8_Template, 2, 2, \"li\", 15);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.answer);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.sources);\n  }\n}\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(http) {\n      this.http = http;\n      this.title = 'RAG UI';\n      this.selectedFiles = [];\n      this.question = '';\n      this.answer = null;\n      this.sources = [];\n      this.loadingUpload = false;\n      this.loadingQuery = false;\n      // Azure Config Fields\n      this.azureEndpoint = '';\n      this.embeddingDeploymentName = '';\n      this.chatCompletionDeploymentName = '';\n      this.azureApiKey = '';\n      this.embedModelApiVersion = '';\n      this.chatCompletionModelApiVersion = '';\n    }\n    get isConfigured() {\n      return this.azureEndpoint.trim() !== '' && this.embeddingDeploymentName.trim() !== '' && this.chatCompletionDeploymentName.trim() !== '' && this.azureApiKey.trim() !== '' && this.embedModelApiVersion.trim() !== '' && this.chatCompletionModelApiVersion.trim() !== '';\n    }\n    onFilesSelected(event) {\n      const files = event.target.files;\n      this.selectedFiles = Array.from(files);\n    }\n    upload() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (!_this.selectedFiles.length) return;\n        const fd = new FormData();\n        for (const f of _this.selectedFiles) {\n          fd.append('files', f, f.name);\n        }\n        _this.loadingUpload = true;\n        try {\n          yield _this.http.post('http://localhost:8000/upload', fd).toPromise();\n          alert('Uploaded, indexing in background.');\n        } catch (err) {\n          console.error(err);\n          alert('Upload failed');\n        } finally {\n          _this.loadingUpload = false;\n        }\n      })();\n    }\n    ask() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this2.question) return;\n        _this2.loadingQuery = true;\n        _this2.answer = null;\n        _this2.sources = [];\n        try {\n          const resp = yield _this2.http.post('http://localhost:8000/query', {\n            question: _this2.question\n          }).toPromise();\n          _this2.answer = resp.answer;\n          _this2.sources = resp.sources || [];\n        } catch (err) {\n          console.error(err);\n          alert('Query failed');\n        } finally {\n          _this2.loadingQuery = false;\n        }\n      })();\n    }\n    setConfig() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        const configPayload = {\n          azureEndpoint: _this3.azureEndpoint,\n          embeddingDeploymentName: _this3.embeddingDeploymentName,\n          chatCompletionDeploymentName: _this3.chatCompletionDeploymentName,\n          azureApiKey: _this3.azureApiKey,\n          embedModelApiVersion: _this3.embedModelApiVersion,\n          chatCompletionModelApiVersion: _this3.chatCompletionModelApiVersion\n        };\n        try {\n          yield _this3.http.post('http://localhost:8000/config', configPayload).toPromise();\n          alert('Configuration saved successfully!');\n        } catch (err) {\n          console.error(err);\n          alert('Failed to save configuration');\n        }\n      })();\n    }\n    static {\n      this.ɵfac = function AppComponent_Factory(t) {\n        return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AppComponent,\n        selectors: [[\"app-root\"]],\n        decls: 56,\n        vars: 20,\n        consts: [[2, \"max-width\", \"800px\", \"margin\", \"20px auto\", \"font-family\", \"Arial, sans-serif\"], [2, \"margin-bottom\", \"10px\"], [\"type\", \"text\", \"placeholder\", \"https://your-resource.openai.azure.com\", 2, \"width\", \"100%\", \"padding\", \"5px\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"placeholder\", \"text-embedding-3-small\", 2, \"width\", \"100%\", \"padding\", \"5px\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"placeholder\", \"gpt-4o-mini\", 2, \"width\", \"100%\", \"padding\", \"5px\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"password\", \"placeholder\", \"your-api-key\", 2, \"width\", \"100%\", \"padding\", \"5px\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"placeholder\", \"2023-05-15\", 2, \"width\", \"100%\", \"padding\", \"5px\", 3, \"ngModelChange\", \"ngModel\"], [2, \"margin-top\", \"10px\", \"padding\", \"8px 16px\", \"background-color\", \"#007bff\", \"color\", \"white\", \"border\", \"none\", \"border-radius\", \"4px\", \"cursor\", \"pointer\", 3, \"click\"], [\"style\", \"color:#999;font-size:12px;margin-top:10px;\", 4, \"ngIf\"], [\"type\", \"file\", \"multiple\", \"\", 3, \"change\", \"disabled\"], [3, \"click\", \"disabled\"], [4, \"ngIf\"], [\"rows\", \"4\", 2, \"width\", \"100%\", 3, \"input\", \"value\", \"disabled\"], [2, \"color\", \"#999\", \"font-size\", \"12px\", \"margin-top\", \"10px\"], [2, \"white-space\", \"pre-wrap\", \"border\", \"1px solid #ddd\", \"padding\", \"10px\"], [4, \"ngFor\", \"ngForOf\"]],\n        template: function AppComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n            i0.ɵɵtext(2);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"section\")(4, \"h3\");\n            i0.ɵɵtext(5, \"Configuration\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\", 1)(7, \"label\");\n            i0.ɵɵtext(8, \"Azure Endpoint:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(9, \"br\");\n            i0.ɵɵelementStart(10, \"input\", 2);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function AppComponent_Template_input_ngModelChange_10_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.azureEndpoint, $event) || (ctx.azureEndpoint = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(11, \"div\", 1)(12, \"label\");\n            i0.ɵɵtext(13, \"OpenAI Embedding Deployment Name:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(14, \"br\");\n            i0.ɵɵelementStart(15, \"input\", 3);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function AppComponent_Template_input_ngModelChange_15_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.embeddingDeploymentName, $event) || (ctx.embeddingDeploymentName = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(16, \"div\", 1)(17, \"label\");\n            i0.ɵɵtext(18, \"OpenAI Chat Completion Deployment Name:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(19, \"br\");\n            i0.ɵɵelementStart(20, \"input\", 4);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function AppComponent_Template_input_ngModelChange_20_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.chatCompletionDeploymentName, $event) || (ctx.chatCompletionDeploymentName = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(21, \"div\", 1)(22, \"label\");\n            i0.ɵɵtext(23, \"Azure API Key:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(24, \"br\");\n            i0.ɵɵelementStart(25, \"input\", 5);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function AppComponent_Template_input_ngModelChange_25_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.azureApiKey, $event) || (ctx.azureApiKey = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(26, \"div\", 1)(27, \"label\");\n            i0.ɵɵtext(28, \"Azure Embed Model API Version:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(29, \"br\");\n            i0.ɵɵelementStart(30, \"input\", 6);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function AppComponent_Template_input_ngModelChange_30_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.embedModelApiVersion, $event) || (ctx.embedModelApiVersion = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(31, \"div\", 1)(32, \"label\");\n            i0.ɵɵtext(33, \"Azure Chat Completion Model API Version:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(34, \"br\");\n            i0.ɵɵelementStart(35, \"input\", 6);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function AppComponent_Template_input_ngModelChange_35_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.chatCompletionModelApiVersion, $event) || (ctx.chatCompletionModelApiVersion = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(36, \"button\", 7);\n            i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_36_listener() {\n              return ctx.setConfig();\n            });\n            i0.ɵɵtext(37, \"Set Config\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(38, AppComponent_div_38_Template, 2, 0, \"div\", 8);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(39, \"hr\");\n            i0.ɵɵelementStart(40, \"section\")(41, \"h3\");\n            i0.ɵɵtext(42, \"Upload Documents\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(43, \"input\", 9);\n            i0.ɵɵlistener(\"change\", function AppComponent_Template_input_change_43_listener($event) {\n              return ctx.onFilesSelected($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(44, \"button\", 10);\n            i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_44_listener() {\n              return ctx.upload();\n            });\n            i0.ɵɵtext(45, \"Upload & Index\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(46, AppComponent_span_46_Template, 2, 0, \"span\", 11);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(47, \"hr\");\n            i0.ɵɵelementStart(48, \"section\")(49, \"h3\");\n            i0.ɵɵtext(50, \"Ask a Question\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(51, \"textarea\", 12);\n            i0.ɵɵlistener(\"input\", function AppComponent_Template_textarea_input_51_listener($event) {\n              return ctx.question = $event.target.value;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(52, \"button\", 10);\n            i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_52_listener() {\n              return ctx.ask();\n            });\n            i0.ɵɵtext(53, \"Submit Query\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(54, AppComponent_span_54_Template, 2, 0, \"span\", 11);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(55, AppComponent_section_55_Template, 9, 2, \"section\", 11);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(ctx.title);\n            i0.ɵɵadvance(8);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.azureEndpoint);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.embeddingDeploymentName);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.chatCompletionDeploymentName);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.azureApiKey);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.embedModelApiVersion);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.chatCompletionModelApiVersion);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", !ctx.isConfigured);\n            i0.ɵɵadvance(2);\n            i0.ɵɵstyleProp(\"opacity\", ctx.isConfigured ? 1 : 0.5);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"disabled\", !ctx.isConfigured);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", ctx.loadingUpload || !ctx.isConfigured);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.loadingUpload);\n            i0.ɵɵadvance(2);\n            i0.ɵɵstyleProp(\"opacity\", ctx.isConfigured ? 1 : 0.5);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"value\", ctx.question)(\"disabled\", !ctx.isConfigured);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", ctx.loadingQuery || !ctx.isConfigured);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.loadingQuery);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.answer);\n          }\n        },\n        dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n        styles: [\"button[_ngcontent-%COMP%]{margin-top:8px}textarea[_ngcontent-%COMP%]{margin-bottom:8px}\"]\n      });\n    }\n  }\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}