{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/mohee/source/repos/rag-ui/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nfunction AppComponent_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Indexing...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_span_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Thinking...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_section_18_li_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const s_r1 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\"\", s_r1.source, \" (chunk \", s_r1.chunk, \")\");\n  }\n}\nfunction AppComponent_section_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\")(1, \"h3\");\n    i0.ɵɵtext(2, \"Answer\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 5);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h4\");\n    i0.ɵɵtext(6, \"Sources\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"ul\");\n    i0.ɵɵtemplate(8, AppComponent_section_18_li_8_Template, 2, 2, \"li\", 6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.answer);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.sources);\n  }\n}\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(http) {\n      this.http = http;\n      this.title = 'RAG UI';\n      this.selectedFiles = [];\n      this.question = '';\n      this.answer = null;\n      this.sources = [];\n      this.loadingUpload = false;\n      this.loadingQuery = false;\n    }\n    onFilesSelected(event) {\n      const files = event.target.files;\n      this.selectedFiles = Array.from(files);\n    }\n    upload() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (!_this.selectedFiles.length) return;\n        const fd = new FormData();\n        for (const f of _this.selectedFiles) {\n          fd.append('files', f, f.name);\n        }\n        _this.loadingUpload = true;\n        try {\n          yield _this.http.post('http://localhost:8000/upload', fd).toPromise();\n          alert('Uploaded, indexing in background.');\n        } catch (err) {\n          console.error(err);\n          alert('Upload failed');\n        } finally {\n          _this.loadingUpload = false;\n        }\n      })();\n    }\n    ask() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this2.question) return;\n        _this2.loadingQuery = true;\n        _this2.answer = null;\n        _this2.sources = [];\n        try {\n          const resp = yield _this2.http.post('http://localhost:8000/query', {\n            question: _this2.question\n          }).toPromise();\n          _this2.answer = resp.answer;\n          _this2.sources = resp.sources || [];\n        } catch (err) {\n          console.error(err);\n          alert('Query failed');\n        } finally {\n          _this2.loadingQuery = false;\n        }\n      })();\n    }\n    static {\n      this.ɵfac = function AppComponent_Factory(t) {\n        return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AppComponent,\n        selectors: [[\"app-root\"]],\n        decls: 19,\n        vars: 7,\n        consts: [[2, \"max-width\", \"800px\", \"margin\", \"20px auto\", \"font-family\", \"Arial, sans-serif\"], [\"type\", \"file\", \"multiple\", \"\", 3, \"change\"], [3, \"click\", \"disabled\"], [4, \"ngIf\"], [\"rows\", \"4\", 2, \"width\", \"100%\", 3, \"input\", \"value\"], [2, \"white-space\", \"pre-wrap\", \"border\", \"1px solid #ddd\", \"padding\", \"10px\"], [4, \"ngFor\", \"ngForOf\"]],\n        template: function AppComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n            i0.ɵɵtext(2);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"section\")(4, \"h3\");\n            i0.ɵɵtext(5, \"Upload Documents\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"input\", 1);\n            i0.ɵɵlistener(\"change\", function AppComponent_Template_input_change_6_listener($event) {\n              return ctx.onFilesSelected($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"button\", 2);\n            i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_7_listener() {\n              return ctx.upload();\n            });\n            i0.ɵɵtext(8, \"Upload & Index\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(9, AppComponent_span_9_Template, 2, 0, \"span\", 3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(10, \"hr\");\n            i0.ɵɵelementStart(11, \"section\")(12, \"h3\");\n            i0.ɵɵtext(13, \"Ask a Question\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"textarea\", 4);\n            i0.ɵɵlistener(\"input\", function AppComponent_Template_textarea_input_14_listener($event) {\n              return ctx.question = $event.target.value;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"button\", 2);\n            i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_15_listener() {\n              return ctx.ask();\n            });\n            i0.ɵɵtext(16, \"Submit Query\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(17, AppComponent_span_17_Template, 2, 0, \"span\", 3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(18, AppComponent_section_18_Template, 9, 2, \"section\", 3);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(ctx.title);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"disabled\", ctx.loadingUpload);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.loadingUpload);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"value\", ctx.question);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", ctx.loadingQuery);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.loadingQuery);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.answer);\n          }\n        },\n        dependencies: [i2.NgForOf, i2.NgIf],\n        styles: [\"button[_ngcontent-%COMP%]{margin-top:8px}textarea[_ngcontent-%COMP%]{margin-bottom:8px}\"]\n      });\n    }\n  }\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}